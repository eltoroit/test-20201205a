<template>
  <div class="slds-is-relative">
    <div class="slds-text-heading_large slds-p-bottom_x-large">Long runnning processes can block the execution!</div>
    <div class="slds-text-heading_medium slds-p-bottom_x-large">
      I want to simulate an operation that takes a long time to complete, I will simulate this using a loop that will be executed for few seconds. To make sure the user does not panic while waiting, I
      will show a SLDS spinner.
    </div>
    <div class="slds-text-heading_medium slds-p-bottom_x-large">What would be the best way to implement this?</div>
    <template if:true={showSpinner}>
      <lightning-spinner variant="brand" alternative-text="Demo..."></lightning-spinner>
    </template>
  </div>
  <c-tabset variant="vertical" default-tab="Test">
    <c-tab label="Test">
      <div>
        <c-button if:false={showSpinner} label="Show Spinner" onclick={onShowSpinner}></c-button>
        <c-button if:true={showSpinner} label="Hide Spinner" onclick={onHideSpinner}></c-button>
      </div>
      <c-tabset default-tab="Code">
        <c-tab label="Code">
          <c-show-code path="loopTest.png"></c-show-code>
        </c-tab>
      </c-tabset>
    </c-tab>
    <c-tab label="While Loop">
      <div>
        <c-button label="Start While Loop" onclick={onWhileLoop}></c-button>
      </div>
      <c-tabset default-tab="Code">
        <c-tab label="Code">
          <c-show-code path="loopWhile.png"></c-show-code>
        </c-tab>
        <c-tab label="Notes">
          <c-show-notes>
            <li>The button remains clicked (red) during the execution of the loop</li>
            <li>Where is the spinner?</li>
            <li>There are about 2.5M iterations per second (on my computer)</li>
          </c-show-notes>
        </c-tab>
      </c-tabset>
    </c-tab>
    <c-tab label="Promise">
      <div>
        <c-button label="Start Promise Loop" onclick={onPromiseLoop}></c-button>
      </div>
      <c-tabset default-tab="Code">
        <c-tab label="Code">
          <c-show-code path="loopPromise.png"></c-show-code>
        </c-tab>
        <c-tab label="Notes">
          <c-show-notes>
            <li>The button remains clicked (red) during the execution of the loop</li>
            <li>Where is the spinner?</li>
            <li>There are about 100K iterations per second (on my computer)</li>
          </c-show-notes>
        </c-tab>
      </c-tabset>
    </c-tab>
    <c-tab label="setTimeout">
      <div>
        <c-button label="Start setTimeout Loop" onclick={onSetTimeoutLoop}></c-button>
      </div>
      <c-tabset default-tab="Code">
        <c-tab label="Code">
          <c-show-code path="loopSetTimeout.png"></c-show-code>
        </c-tab>
        <c-tab label="Notes">
          <c-show-notes>
            <li>The button remains clicked (red) during the execution of the loop</li>
            <li>Where is the spinner?</li>
            <li>There are about 200 iterations per second (on my computer)</li>
          </c-show-notes>
        </c-tab>
      </c-tabset>
    </c-tab>
  </c-tabset>
  <div class="slds-align_absolute-center slds-p-top_medium">Hint: Open the inspector tool and watch the event working</div>
</template>
